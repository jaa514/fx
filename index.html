<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Jasur Root Calculator</title>
<link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Rajdhani:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• CSS VARIABLES â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
:root {
  --bg:        #080c12;
  --bg-card:   #0e1620;
  --bg-input:  #0a1018;
  --border:    #1a2d48;
  --text:      #c0d4e8;
  --text-sec:  #4a6a8a;
  --text-dim:  #243550;
  --gold:      #e8a000;

  /* active theme â€” overridden per mode */
  --ac:        #1a6fc4;
  --ac-bg:     rgba(26,111,196,.08);
  --ac-border: rgba(26,111,196,.3);
  --ac-glow:   rgba(26,111,196,.22);
  --ac-dark:   #0c2040;

  --green:     #00cc76;
  --red:       #ff3f50;
}

/* â”€â”€ MODE THEMES â”€â”€ */
body.sell {
  --ac: #ff3f50; --ac-bg: rgba(255,63,80,.08);
  --ac-border: rgba(255,63,80,.32); --ac-glow: rgba(255,63,80,.22);
  --ac-dark: #2e0810;
}
body.buy {
  --ac: #00cc76; --ac-bg: rgba(0,204,118,.08);
  --ac-border: rgba(0,204,118,.3); --ac-glow: rgba(0,204,118,.2);
  --ac-dark: #00200e;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• RESET & BASE â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
*, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }

body {
  font-family: 'Rajdhani', sans-serif;
  background: var(--bg);
  color: var(--text);
  min-height: 100vh;
  display: flex; flex-direction: column;
  align-items: center; justify-content: center;
  padding: 24px 16px;
  transition: background-image .6s;
}

/* Dynamic BG glow per mode */
body {
  background-image:
    radial-gradient(ellipse 55% 35% at 15% 5%,  rgba(26,111,196,.07) 0%, transparent 65%),
    radial-gradient(ellipse 45% 30% at 85% 95%, rgba(26,111,196,.05) 0%, transparent 65%),
    repeating-linear-gradient(0deg,   transparent, transparent 39px, rgba(20,40,70,.14) 39px, rgba(20,40,70,.14) 40px),
    repeating-linear-gradient(90deg,  transparent, transparent 39px, rgba(20,40,70,.14) 39px, rgba(20,40,70,.14) 40px);
}
body.sell { background-image:
    radial-gradient(ellipse 55% 35% at 15% 5%,  rgba(255,63,80,.1)  0%, transparent 65%),
    radial-gradient(ellipse 45% 30% at 85% 95%, rgba(200,20,35,.06) 0%, transparent 65%),
    repeating-linear-gradient(0deg,   transparent, transparent 39px, rgba(20,40,70,.14) 39px, rgba(20,40,70,.14) 40px),
    repeating-linear-gradient(90deg,  transparent, transparent 39px, rgba(20,40,70,.14) 39px, rgba(20,40,70,.14) 40px);
}
body.buy { background-image:
    radial-gradient(ellipse 55% 35% at 15% 5%,  rgba(0,204,118,.09) 0%, transparent 65%),
    radial-gradient(ellipse 45% 30% at 85% 95%, rgba(0,160,80,.06)  0%, transparent 65%),
    repeating-linear-gradient(0deg,   transparent, transparent 39px, rgba(20,40,70,.14) 39px, rgba(20,40,70,.14) 40px),
    repeating-linear-gradient(90deg,  transparent, transparent 39px, rgba(20,40,70,.14) 39px, rgba(20,40,70,.14) 40px);
}

.wrap { width: 100%; max-width: 460px; }

/* â”€â”€â”€ animations â”€â”€â”€ */
@keyframes fadeUp  { from{opacity:0;transform:translateY(16px)} to{opacity:1;transform:translateY(0)} }
@keyframes slideIn { from{opacity:0;transform:translateY(8px)}  to{opacity:1;transform:translateY(0)} }
@keyframes pulse   { 0%,100%{opacity:1} 50%{opacity:.3} }
@keyframes scan    { 0%{top:-8%} 100%{top:108%} }
@keyframes countUp { from{opacity:0;transform:scale(.96)} to{opacity:1;transform:scale(1)} }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• HEADER â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.hdr { text-align:center; margin-bottom:24px; animation:fadeUp .55s ease; }

.hdr-chip {
  display: inline-block;
  font-family: 'Share Tech Mono', monospace;
  font-size: 9px; letter-spacing: 3px; text-transform: uppercase;
  color: var(--ac); background: var(--ac-bg); border: 1px solid var(--ac-border);
  padding: 4px 14px; margin-bottom: 13px;
  transition: color .4s, background .4s, border-color .4s;
}

.hdr h1 {
  font-size: 28px; font-weight: 700; letter-spacing: 2px;
  text-transform: uppercase; color: #d8ecff; line-height: 1;
}
.hdr h1 em { color: var(--gold); font-style: normal; }
.hdr-sub {
  margin-top: 8px; font-size: 11px; letter-spacing: 2px;
  color: var(--text-sec); font-family: 'Share Tech Mono', monospace;
  transition: color .4s;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• MODE SELECTOR â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.mode-section { margin-bottom: 22px; animation: fadeUp .55s .08s both; }

.mode-label {
  text-align: center; display: block; margin-bottom: 10px;
  font-family: 'Share Tech Mono', monospace;
  font-size: 9px; letter-spacing: 2.5px; text-transform: uppercase;
  color: var(--text-dim);
}

.mode-row {
  display: grid; grid-template-columns: 1fr 1fr;
  gap: 6px;
}

.mode-btn {
  position: relative; overflow: hidden;
  padding: 16px 10px 14px;
  background: var(--bg-input); border: 1px solid var(--border);
  cursor: pointer; transition: all .3s;
  display: flex; flex-direction: column; align-items: center; gap: 4px;
  font-family: 'Rajdhani', sans-serif;
}

.mode-btn .mb-icon { font-size: 26px; line-height: 1; transition: transform .3s; }
.mode-btn .mb-head {
  font-size: 13px; font-weight: 700; letter-spacing: 2px;
  text-transform: uppercase; color: var(--text-sec);
  transition: color .3s;
}
.mode-btn .mb-sub {
  font-size: 9px; letter-spacing: 1px; color: var(--text-dim);
  font-family: 'Share Tech Mono', monospace; transition: color .3s;
}
.mode-btn .mb-formula {
  margin-top: 6px; font-family: 'Share Tech Mono', monospace;
  font-size: 10px; color: var(--text-dim); transition: color .3s;
  padding: 4px 10px; border: 1px solid transparent; transition: all .3s;
}

.mode-btn:hover .mb-head { color: var(--text); }

/* SELL active */
.mode-btn.active-sell {
  background: rgba(255,63,80,.07);
  border-color: rgba(255,63,80,.35);
  box-shadow: 0 0 24px rgba(255,63,80,.18), inset 0 0 20px rgba(255,63,80,.04);
}
.mode-btn.active-sell .mb-icon   { transform: scale(1.18); }
.mode-btn.active-sell .mb-head   { color: var(--red); }
.mode-btn.active-sell .mb-sub    { color: rgba(255,63,80,.75); }
.mode-btn.active-sell .mb-formula {
  color: var(--red); border-color: rgba(255,63,80,.25);
  background: rgba(255,63,80,.06);
}
.mode-btn.active-sell::after {
  content: ''; position: absolute; top: 0; left: 0; right: 0; height: 2px;
  background: linear-gradient(90deg, transparent, var(--red), transparent);
}

/* BUY active */
.mode-btn.active-buy {
  background: rgba(0,204,118,.07);
  border-color: rgba(0,204,118,.32);
  box-shadow: 0 0 24px rgba(0,204,118,.16), inset 0 0 20px rgba(0,204,118,.04);
}
.mode-btn.active-buy .mb-icon   { transform: scale(1.18); }
.mode-btn.active-buy .mb-head   { color: var(--green); }
.mode-btn.active-buy .mb-sub    { color: rgba(0,204,118,.75); }
.mode-btn.active-buy .mb-formula {
  color: var(--green); border-color: rgba(0,204,118,.25);
  background: rgba(0,204,118,.06);
}
.mode-btn.active-buy::after {
  content: ''; position: absolute; top: 0; left: 0; right: 0; height: 2px;
  background: linear-gradient(90deg, transparent, var(--green), transparent);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• DIVIDER â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.div { display:flex; align-items:center; gap:10px; margin-bottom:20px; }
.div-line { flex:1; height:1px; background:var(--border); }
.div-gem  {
  width:7px; height:7px; transform:rotate(45deg);
  background: var(--ac); box-shadow: 0 0 10px var(--ac);
  transition: background .4s, box-shadow .4s;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• INPUT CARD â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.card {
  background: var(--bg-card); border: 1px solid var(--border);
  padding: 24px; position: relative; overflow: hidden;
  animation: fadeUp .55s .16s both;
}
.card::before {
  content: ''; position: absolute; top: 0; left: 0; right: 0; height: 2px;
  background: linear-gradient(90deg, transparent, var(--ac), transparent);
  transition: background .4s;
}
/* scanline atmosphere */
.card::after {
  content: ''; position: absolute; left: 0; right: 0; height: 28px;
  background: linear-gradient(transparent, rgba(255,255,255,.012), transparent);
  animation: scan 7s linear infinite; pointer-events: none; z-index: 0;
}
.card > * { position: relative; z-index: 1; }

/* â”€â”€ field â”€â”€ */
.field { margin-bottom: 20px; }
.field label {
  display: block; font-family: 'Share Tech Mono', monospace;
  font-size: 9px; letter-spacing: 2px; text-transform: uppercase;
  color: var(--text-sec); margin-bottom: 8px;
}
.field input {
  width: 100%; background: var(--bg-input); border: 1px solid var(--border);
  color: var(--text); font-family: 'Share Tech Mono', monospace;
  font-size: 20px; padding: 13px 15px; outline: none;
  transition: border-color .2s, box-shadow .2s;
  appearance: none; -webkit-appearance: none;
}
.field input:focus {
  border-color: var(--ac); box-shadow: 0 0 0 3px var(--ac-glow);
}
.field input::placeholder { color: var(--text-dim); font-size: 14px; }
.err {
  display: none; font-family: 'Share Tech Mono', monospace;
  font-size: 10px; color: var(--red); margin-top: 7px;
}

/* â”€â”€ formula preview box â”€â”€ */
.formula-box {
  padding: 11px 14px; margin-bottom: 20px;
  background: var(--ac-bg); border: 1px solid var(--ac-border);
  font-family: 'Share Tech Mono', monospace; font-size: 11px;
  color: var(--text-sec); line-height: 1; transition: all .4s;
  display: flex; align-items: center; gap: 10px;
}
.formula-box .fb-label { font-size: 9px; letter-spacing: 1px; opacity: .7; }
.formula-box .fb-eq {
  font-size: 13px; color: var(--ac); font-weight: 700; letter-spacing: 1px;
  transition: color .4s;
}

/* â”€â”€ button â”€â”€ */
.btn {
  width: 100%; padding: 15px;
  background: linear-gradient(140deg, var(--ac-dark), var(--ac));
  border: 1px solid var(--ac-border); color: #ddeeff;
  font-family: 'Rajdhani', sans-serif; font-size: 14px;
  font-weight: 700; letter-spacing: 3px; text-transform: uppercase;
  cursor: pointer; position: relative; overflow: hidden;
  transition: box-shadow .3s, transform .15s, background .4s, border-color .4s;
}
.btn:hover { box-shadow: 0 0 30px var(--ac-glow); filter: brightness(1.1); transform: translateY(-1px); }
.btn:active { transform: translateY(0); }
.btn::before {
  content: ''; position: absolute; top: -50%; left: -65%;
  width: 45%; height: 200%; background: rgba(255,255,255,.08);
  transform: skewX(-22deg); transition: left .5s;
}
.btn:hover::before { left: 130%; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• RESULT PANEL â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.result-panel { display: none; margin-top: 20px; }
.result-panel.on { display: block; animation: slideIn .4s ease; }

/* â”€â”€ result card â”€â”€ */
.rcard {
  padding: 20px 22px; border: 1px solid;
  position: relative; overflow: hidden;
}

.rcard.sell-card {
  background: rgba(255,63,80,.07);
  border-color: rgba(255,63,80,.35);
  border-left: 3px solid var(--red);
}
.rcard.buy-card {
  background: rgba(0,204,118,.07);
  border-color: rgba(0,204,118,.32);
  border-left: 3px solid var(--green);
}

/* glow shimmer on top edge */
.rcard.sell-card::before {
  content: ''; position: absolute; top: 0; left: 0; right: 0; height: 1px;
  background: linear-gradient(90deg, transparent, var(--red), transparent);
}
.rcard.buy-card::before {
  content: ''; position: absolute; top: 0; left: 0; right: 0; height: 1px;
  background: linear-gradient(90deg, transparent, var(--green), transparent);
}

/* â”€â”€ entry type tag â”€â”€ */
.entry-tag {
  display: inline-flex; align-items: center; gap: 6px;
  font-family: 'Share Tech Mono', monospace;
  font-size: 8px; letter-spacing: 2.5px; text-transform: uppercase;
  padding: 3px 10px 3px 8px; border: 1px solid; margin-bottom: 10px;
}
.sell-card .entry-tag { color: var(--red);   border-color: rgba(255,63,80,.35);  background: rgba(255,63,80,.08); }
.buy-card  .entry-tag { color: var(--green); border-color: rgba(0,204,118,.32); background: rgba(0,204,118,.07); }
.entry-tag .dot {
  width: 5px; height: 5px; border-radius: 50%;
  animation: pulse 1.8s infinite;
}
.sell-card .dot { background: var(--red);   box-shadow: 0 0 5px var(--red); }
.buy-card  .dot { background: var(--green); box-shadow: 0 0 5px var(--green); }

/* â”€â”€ result value â”€â”€ */
.rval {
  font-family: 'Share Tech Mono', monospace;
  font-size: 42px; font-weight: 700; letter-spacing: 1px; line-height: 1;
  animation: countUp .35s ease;
}
.sell-card .rval { color: var(--red);   text-shadow: 0 0 24px rgba(255,63,80,.3); }
.buy-card  .rval { color: var(--green); text-shadow: 0 0 24px rgba(0,204,118,.25); }

/* â”€â”€ sub info â”€â”€ */
.rval-sub { display: flex; align-items: center; justify-content: space-between; margin-top: 10px; }
.rpct {
  font-family: 'Share Tech Mono', monospace; font-size: 12px; opacity: .65;
}
.sell-card .rpct { color: var(--red); }
.buy-card  .rpct { color: var(--green); }

.rformula { font-family: 'Share Tech Mono', monospace; font-size: 10px; color: var(--text-dim); }

/* â”€â”€ divider inside result â”€â”€ */
.r-sep { height: 1px; background: var(--border); margin: 14px 0; }

/* â”€â”€ strategy tip â”€â”€ */
.stip {
  font-family: 'Share Tech Mono', monospace; font-size: 10px;
  line-height: 1.85; letter-spacing: .4px;
  padding: 10px 12px; border-left: 2px solid;
}
.sell-card .stip { color: rgba(255,63,80,.8);  border-color: var(--red);   background: rgba(255,63,80,.05); }
.buy-card  .stip { color: rgba(0,204,118,.8); border-color: var(--green); background: rgba(0,204,118,.04); }

/* â”€â”€ info bar â”€â”€ */
.ibar {
  display: flex; gap: 0; margin-top: 16px;
  border: 1px solid var(--ac-border); background: var(--ac-bg);
  transition: all .4s;
}
.ibar-item {
  flex: 1; text-align: center; padding: 10px 6px;
  border-right: 1px solid var(--border);
}
.ibar-item:last-child { border-right: none; }
.ibar-lbl { font-family: 'Share Tech Mono', monospace; font-size: 8px; letter-spacing: 1px; text-transform: uppercase; color: var(--text-dim); display: block; }
.ibar-val { font-family: 'Share Tech Mono', monospace; font-size: 12px; color: var(--text-sec); margin-top: 3px; }

/* â”€â”€ no-mode placeholder â”€â”€ */
.no-mode {
  display: none; margin-top: 20px;
  padding: 18px; border: 1px dashed var(--border);
  text-align: center; font-family: 'Share Tech Mono', monospace;
  font-size: 11px; color: var(--text-dim); letter-spacing: 1px;
  line-height: 1.7;
}
.no-mode.on { display: block; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• FOOTER â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.footer {
  text-align: center; margin-top: 20px;
  font-family: 'Share Tech Mono', monospace;
  font-size: 9px; letter-spacing: 1.5px; color: var(--text-dim);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• RESPONSIVE â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
@media (max-width: 380px) {
  .hdr h1 { font-size: 22px; }
  .rval   { font-size: 32px; }
  .mode-btn .mb-icon { font-size: 22px; }
  .mode-btn .mb-head { font-size: 11px; }
  .mode-btn .mb-formula { font-size: 9px; }
}
</style>
</head>
<body>

<div class="wrap">

  <!-- â•â•â• HEADER â•â•â• -->
  <div class="hdr">
    <div class="hdr-chip" id="hdr-chip">Reja Â· SQUARE ROOT METHOD</div>
    <h1>JA$UR <em>CALCULATOR</em></h1>
    <p class="hdr-sub" id="hdr-sub">// PILIH MODE â†’ MASUKKAN HARGA â†’ HITUNG</p>
  </div>

  <!-- â•â•â• MODE SELECTOR â•â•â• -->
  <div class="mode-section">
    <span class="mode-label">â–¸ PILIH ARAH TREND</span>
    <div class="mode-row">

      <!-- SELL -->
      <button class="mode-btn" id="mbtn-sell" onclick="setMode('sell')">
        <span class="mb-icon">ğŸ“‰</span>
        <span class="mb-head">CARI SELL</span>
        <span class="mb-sub">Uptrend Reversal</span>
      </button>

      <!-- BUY -->
      <button class="mode-btn" id="mbtn-buy" onclick="setMode('buy')">
        <span class="mb-icon">ğŸ“ˆ</span>
        <span class="mb-head">CARI BUY</span>
        <span class="mb-sub">Downtrend Reversal</span>
      </button>

    </div>
  </div>

  <!-- â•â•â• DIVIDER â•â•â• -->
  <div class="div">
    <div class="div-line"></div>
    <div class="div-gem"></div>
    <div class="div-line"></div>
  </div>

  <!-- â•â•â• INPUT CARD â•â•â• -->
  <div class="card">

    <div class="field">
      <label>PRICE </label>
      <input type="number" id="price" placeholder="Masukkan harga" min="0" step="any">
      <div class="err" id="err">âš  Masukkan harga yang valid (lebih dari 0)</div>
    </div>

    <!-- Formula preview â€” updates per mode -->
    <div class="formula-box" id="formula-box">
      <div>
        <div class="fb-label">RUMUS AKTIF</div>
        <div class="fb-eq" id="fb-eq">â€” Pilih mode terlebih dahulu â€”</div>
      </div>
    </div>

    <button class="btn" id="calc-btn" onclick="calc()">
      â–¶ &nbsp;<span id="btn-txt">HITUNG</span>
    </button>

    <!-- â•â•â• RESULT PANEL â•â•â• -->
    <div class="result-panel" id="result-panel">
      <div class="rcard" id="rcard">

        <div class="entry-tag">
          <span class="dot"></span>
          <span id="entry-label">ENTRY</span>
        </div>

        <div class="rval" id="rval">â€”</div>

        <div class="rval-sub">
          <span class="rpct" id="rpct"></span>
          <span class="rformula" id="rformula"></span>
        </div>

        <div class="r-sep"></div>

        <div class="stip" id="stip"></div>

      </div>

      <!-- Info bar -->
      <div class="ibar" id="ibar">
        <div class="ibar-item">
          <span class="ibar-lbl">âˆš Harga</span>
          <div class="ibar-val" id="ib-sqrt">â€”</div>
        </div>
        <div class="ibar-item">
          <span class="ibar-lbl">Faktor</span>
          <div class="ibar-val" id="ib-factor">â€”</div>
        </div>
        <div class="ibar-item">
          <span class="ibar-lbl">Selisih</span>
          <div class="ibar-val" id="ib-delta">â€”</div>
        </div>
        <div class="ibar-item">
          <span class="ibar-lbl">Input</span>
          <div class="ibar-val" id="ib-price">â€”</div>
        </div>
      </div>

    </div><!-- /result-panel -->

    <!-- No mode selected hint -->
    <div class="no-mode" id="no-mode">
      Pilih mode <strong>CARI SELL</strong> atau <strong>CARI BUY</strong><br>
      di atas sebelum menghitung.
    </div>

  </div><!-- /card -->

  <div class="footer">JASUR SQUARE ROOT CALCULATOR &nbsp;Â·&nbsp; NOT FINANCIAL ADVICE</div>

</div><!-- /wrap -->

<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• STATE â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const FACTOR = 0.125;
let   mode   = null; // 'sell' | 'buy' | null

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• UTILS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const q = id => document.getElementById(id);

function fmt(n) {
  return n >= 1000
    ? n.toLocaleString('id-ID', { minimumFractionDigits:2, maximumFractionDigits:2 })
    : n.toFixed(4);
}

function pct(base, target) {
  const d = (target - base) / base * 100;
  return `${d >= 0 ? '+' : ''}${d.toFixed(2)}%`;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SET MODE â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function setMode(m) {
  mode = m;
  const body = document.body;
  body.classList.remove('sell', 'buy');

  // reset btns
  ['mbtn-sell', 'mbtn-buy'].forEach(id => {
    q(id).className = 'mode-btn';
  });

  if (m === 'sell') {
    body.classList.add('sell');
    q('mbtn-sell').classList.add('active-sell');
    q('hdr-chip').textContent = 'UPTREND Â· SELL REVERSAL SCANNER';
    q('hdr-sub').textContent  = '// MODE: CARI ENTRY SELL â€” UPTREND REVERSAL';
    q('btn-txt').textContent  = 'SCAN SELL ZONE';
    q('fb-eq').textContent    = '( âˆšharga + 0.125 )Â²  â†’  RESISTANCE LEVEL';

  } else {
    body.classList.add('buy');
    q('mbtn-buy').classList.add('active-buy');
    q('hdr-chip').textContent = 'DOWNTREND Â· BUY REVERSAL SCANNER';
    q('hdr-sub').textContent  = '// MODE: CARI ENTRY BUY â€” DOWNTREND REVERSAL';
    q('btn-txt').textContent  = 'SCAN BUY ZONE';
    q('fb-eq').textContent    = '( âˆšharga âˆ’ 0.125 )Â²  â†’  SUPPORT LEVEL';
  }

  // hide stale result, hide no-mode hint
  q('result-panel').classList.remove('on');
  q('no-mode').classList.remove('on');

  // re-run calc if price already filled
  const price = parseFloat(q('price').value);
  if (price > 0) calc();
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• CALCULATE â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function calc() {
  const pinput = q('price');
  const price  = parseFloat(pinput.value);
  const rp     = q('result-panel');
  const nm     = q('no-mode');

  // Guard: no mode
  if (!mode) {
    rp.classList.remove('on');
    nm.classList.add('on');
    return;
  }
  nm.classList.remove('on');

  // Guard: invalid price
  if (!pinput.value || isNaN(price) || price <= 0) {
    q('err').style.display = 'block';
    pinput.style.borderColor = 'var(--red)';
    rp.classList.remove('on');
    return;
  }
  q('err').style.display = 'none';
  pinput.style.borderColor = 'var(--border)';

  const sq     = Math.sqrt(price);
  const factor = mode === 'sell' ? +FACTOR : -FACTOR;
  const result = Math.pow(sq + factor, 2);
  const delta  = Math.abs(result - price);

  /* â”€â”€ style rcard â”€â”€ */
  const rc = q('rcard');
  rc.className = `rcard ${mode === 'sell' ? 'sell-card' : 'buy-card'}`;

  /* â”€â”€ entry label â”€â”€ */
  q('entry-label').textContent = mode === 'sell'
    ? 'ENTRY SELL  /  RESISTANCE LEVEL'
    : 'ENTRY BUY  /  SUPPORT LEVEL';

  /* â”€â”€ big value â”€â”€ */
  q('rval').textContent = fmt(result);

  /* â”€â”€ pct & formula â”€â”€ */
  q('rpct').textContent = pct(price, result) + ' dari harga referensi';

  const sign = mode === 'sell' ? '+' : 'âˆ’';
  q('rformula').textContent =
    `(${sq.toFixed(4)} ${sign} ${FACTOR})Â² = ${fmt(result)}`;

  /* â”€â”€ strategy tip â”€â”€ */
  q('stip').textContent = mode === 'sell'
    ? 'âš   ZONA REVERSAL SELL\nHarga mendekati level ini â†’ amati sinyal bearish (rejection, engulfing, pin bar) sebelum eksekusi SHORT. Gunakan level ini sebagai Take Profit jika sedang Long.'
    : 'âœ”  ZONA REVERSAL BUY\nHarga mendekati level ini â†’ tunggu konfirmasi bullish (hammer, breakout retest) sebelum eksekusi LONG. Gunakan level ini sebagai Take Profit jika sedang Short.';

  /* â”€â”€ info bar â”€â”€ */
  q('ib-sqrt').textContent   = sq.toFixed(4);
  q('ib-factor').textContent = (factor >= 0 ? '+' : '') + factor;
  q('ib-delta').textContent  = fmt(delta);
  q('ib-price').textContent  = fmt(price);

  /* â”€â”€ ibar accent â”€â”€ */
  const ib = q('ibar');
  ib.style.background   = mode === 'sell' ? 'rgba(255,63,80,.06)'  : 'rgba(0,204,118,.06)';
  ib.style.borderColor  = mode === 'sell' ? 'rgba(255,63,80,.28)'  : 'rgba(0,204,118,.26)';

  /* â”€â”€ animate in â”€â”€ */
  rp.classList.remove('on');
  void rp.offsetWidth;
  rp.classList.add('on');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• ENTER KEY â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
q('price').addEventListener('keydown', e => { if (e.key === 'Enter') calc(); });
</script>
</body>
</html>